<mvc:View
    controllerName="dep.fiori.wonotification.app.detail"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:c="sap.ui.core"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false"
        enableScrolling="false">
        <u:ObjectPageLayout useIconTabBar="true">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Detail.title} {/AUFNR}" />
            </u:headerTitle>

            <u:headerContent>
                <VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox
                        fitContainer="true"
                        renderType="Bare"
                        alignItems="Center"
                        visible="{= ${/WO_EXISTS} !== 'X' }">
                        <c:Icon
                            src="sap-icon://decline"
                            size="1.25rem"
                            color="red"
                            tooltip="{i18n>List.woMissing}"
                            class="sapUiTinyMarginEnd" />
                        <Label
                            text="{i18n>List.woMissing}"
                            tooltip="{i18n>List.woMissing}"
                            class="sapUiTinyMarginEnd" />
                        <Button
                            text="{i18n>WorkOrder.create}"
                            press="createWorkOrder" />
                    </HBox>
                    <HBox
                        fitContainer="true"
                        renderType="Bare"
                        alignItems="Center"
                        visible="{= ${/WO_EXISTS} === 'X' }">
                        <c:Icon
                            src="sap-icon://accept"
                            size="1.25rem"
                            color="green"
                            tooltip="{i18n>List.woExists}"
                            class="sapUiTinyMarginEnd" />
                        <Label
                            text="{i18n>List.woExists}"
                            tooltip="{i18n>List.woExists}"
                            class="sapUiTinyMarginEnd" />
                        <Button
                            text="{i18n>WorkOrder.view}"
                            press="toWorkOrder" />
                    </HBox>
                </VBox>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection>
                    <u:ObjectPageSubSection>
                        <VBox
                            fitContainer="true"
                            renderType="Bare">
                            <f:Form>
                                <f:layout>
                                    <f:ResponsiveGridLayout hSpacing="2" />
                                </f:layout>
                                <f:FormContainer>
                                    <f:FormElement>
                                        <f:label>
                                            <Label text="{i18nGlobal>General.description}:" />
                                        </f:label>
                                        <Label
                                            text="{/QMTXT}"
                                            tooltip="{/QMTXT}" />
                                    </f:FormElement>

                                    <f:FormElement>
                                        <f:label>
                                            <Label
                                                text="{i18nGlobal>General.equipment}:"
                                                tooltip="{i18nGlobal>General.equipment}">
                                                <layoutData>
                                                    <l:GridData span="L2 M2 S12" linebreak="true" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <Label
                                            text="{/EQUNR}"
                                            tooltip="{/EQUNR}">
                                            <layoutData>
                                                <l:GridData span="L2 M3 S4" />
                                            </layoutData>
                                        </Label>
                                    </f:FormElement>

                                    <f:FormElement>
                                        <f:label>
                                            <Label
                                                text="{i18n>Form.damageCode}:"
                                                tooltip="{i18n>Form.damageCode}">
                                                <layoutData>
                                                    <l:GridData span="L2 M2 S12" linebreak="true" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <Select
                                            items="{
                                                path: 'odata>/Damage_Code',
                                                filters: [
                                                    {
                                                        path: 'FEGRP',
                                                        operator: 'EQ',
                                                        value1: 'PM1'
                                                    }
                                                ]
                                            }"
                                            selectedKey="{/FECOD}"
                                            change="onDamageCodeSelect"
                                            showSecondaryValues="true"
                                            forceSelection="false">
                                            <c:ListItem
                                                text="{odata>FECOD}"
                                                key="{odata>FECOD}"
                                                additionalText="{odata>FETXT}" />
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </Select>
                                    </f:FormElement>

                                    <f:FormElement>
                                        <f:label>
                                            <Label
                                                text="{i18n>Form.causeCode}:"
                                                tooltip="{i18n>Form.causeCode}">
                                                <layoutData>
                                                    <l:GridData span="L2 M3 S12" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <Select
                                            items="{
                                                path: 'odata>/Cause_Code',
                                                filters: [
                                                    {
                                                        path: 'URGRP',
                                                        operator: 'EQ',
                                                        value1: 'PM1'
                                                    }
                                                ]
                                            }"
                                            selectedKey="{/URCOD}"
                                            change="onCauseCodeSelect"
                                            showSecondaryValues="true"
                                            forceSelection="false">
                                            <c:ListItem
                                                text="{odata>URCOD}"
                                                key="{odata>URCOD}"
                                                additionalText="{odata>URTXT}" />
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </Select>
                                    </f:FormElement>

                                    <f:FormElement>
                                        <f:label>
                                            <Label
                                                text="{i18nGlobal>General.breakdown}:"
                                                tooltip="{i18nGlobal>General.breakdown}">
                                                <layoutData>
                                                    <l:GridData span="L2 M2 S12" linebreak="true" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <Checkbox
                                            selected="{= ${/MSAUS} === 'X' }"
                                            select="onBreakdownSelect" />
                                    </f:FormElement>

                                    <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                                        <f:label>
                                            <Label
                                                text="{i18n>Form.malfunctionStart}:"
                                                tooltip="{i18n>Form.malfunctionStart}">
                                                <layoutData>
                                                    <l:GridData span="L2 M2 S12" linebreak="true" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <DatePicker
                                            value="{/AUSVN}"
                                            valueFormat="yyyyMMdd">
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </DatePicker>
                                        <TimePicker
                                            value="{/AUZTV}"
                                            valueFormat="hhmmss">
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </TimePicker>
                                    </f:FormElement>

                                    <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                                        <f:label>
                                            <Label
                                                text="{i18n>Form.malfunctionEnd}:"
                                                tooltip="{i18n>Form.malfunctionEnd}">
                                                <layoutData>
                                                    <l:GridData span="L2 M2 S12" linebreak="true" />
                                                </layoutData>
                                            </Label>
                                        </f:label>
                                        <DatePicker
                                            value="{/AUSBS}"
                                            valueFormat="yyyyMMdd">
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </DatePicker>
                                        <TimePicker
                                            value="{/AUZTB}"
                                            valueFormat="hhmmss">
                                            <layoutData>
                                                <l:GridData span="L2 M3 S6" />
                                            </layoutData>
                                        </TimePicker>
                                    </f:FormElement>
                                </f:FormContainer>
                            </f:Form>
                        </VBox>
                    </u:ObjectPageSubSection>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    text="{i18nGlobal>General.save}"
                    type="Emphasized"
                    press="onSave" />
                <Button
                    text="{i18nGlobal>General.cancel}"
                    press="onCancel" />
            </Toolbar>
        </footer>
    </Page>
</mvc:View>