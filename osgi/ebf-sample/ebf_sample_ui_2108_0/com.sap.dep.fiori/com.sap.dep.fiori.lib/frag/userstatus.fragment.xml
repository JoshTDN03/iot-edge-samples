<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form">
    <Dialog
        title="{i18nGlobal>UserStatus.title}"
        class="dep-fiori"
        stretchOnPhone="true"
        contentHeight="100%"
        verticalScrolling="false"
        afterClose="dep.fiori.lib.util.UserStatus.onCancel">
        <Page
            showHeader="false"
            showSubHeader="false">
            <f:Form>
                <f:layout>
                    <f:ResponsiveGridLayout labelSpanL="2" />
                </f:layout>
                <f:FormContainer title="{i18nGlobal>Workorder.userStatus}:">
                    <f:layoutData>
                        <l:GridData span="L12 M12 S12" />
                    </f:layoutData>
                    <f:FormElement>
                        <Select
                            items="{/}"
                            selectedKey="{selected>/}"
                            showSecondaryValues="true"
                            enabled="{= ${workorder>/status} !== 'TECO' }">
                            <c:ListItem
                                text="{STATUS_CODE}"
                                key="{STATUS_CODE}"
                                additionalText="{STATUS_DESC}"
                                enabled="{
                                    parts: [ 'STATUS_CODE', 'workorder>/status', 'workorder>/canComplete' ],
                                    formatter: '.validUserStatusFormatter'
                                }" />
                            <layoutData>
                                <l:GridData span="L4 M6 S12" />
                            </layoutData>
                        </Select>
                    </f:FormElement>
                </f:FormContainer>

                <f:FormContainer
                    title="{i18nGlobal>Workorder.unnumberedStatus}:"
                    formElements="{unnumbered>/}">
                    <f:layoutData>
                        <l:GridData span="L12 M12 S12" />
                    </f:layoutData>
                    <f:FormElement>
                        <CheckBox
                            text="{unnumbered>DO_KEY} {unnumbered>VALUE}"
                            selected="{= ${unnumbered>DO_KEY} === ${selected-unnumbered>/} }"
                            select="onSelectUnnumbered"
                            enabled="{
                                parts: [ 'unnumbered>DO_KEY', 'selected-unnumbered>/', 'selected>/', 'workorder>/status' ],
                                formatter: '.validUnnumberedStatus'
                            }">
                        </CheckBox>
                    </f:FormElement>
                </f:FormContainer>
            </f:Form>

            <footer>
                <Toolbar>
                    <ToolbarSpacer />
                    <Button
                        text="{i18nGlobal>General.save}"
                        type="Emphasized"
                        press="dep.fiori.lib.util.UserStatus.onSave" />
                    <Button
                        text="{i18nGlobal>General.cancel}"
                        press="dep.fiori.lib.util.UserStatus.close" />
                </Toolbar>
            </footer>
        </Page>
    </Dialog>
</c:FragmentDefinition>