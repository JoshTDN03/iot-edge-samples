<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form">
    <Dialog
        class="dep-fiori"
        title="{i18n>Dialog.title}">

        <f:Form>
            <f:layout>
                <f:ResponsiveGridLayout hSpacing="2" />
            </f:layout>
            <f:FormContainer>
                <f:FormElement>
                    <f:label>
                        <Label text="{i18nGlobal>General.description}:" />
                    </f:label>
                    <Label
                        text="{/QMTXT}"
                        tooltip="{/QMTXT}" />
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18nGlobal>General.equipment}:"
                            tooltip="{i18nGlobal>General.equipment}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{/EQUNR}"
                        tooltip="{/EQUNR}">
                        <layoutData>
                            <l:GridData span="L2 M3 S4" />
                        </layoutData>
                    </Label>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18n>Form.damageCode}:"
                            tooltip="{i18n>Form.damageCode}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{/FECOD}"
                        tooltip="{/FECOD}">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18n>Form.causeCode}:"
                            tooltip="{i18n>Form.causeCode}">
                            <layoutData>
                                <l:GridData span="L2 M3 S12" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{/URCOD}"
                        tooltip="{/URCOD}">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18nGlobal>General.breakdown}:"
                            tooltip="{i18nGlobal>General.breakdown}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{= ${/MSAUS} === 'X' ? ${i18nGlobal>General.yes} : ${i18nGlobal>General.no} }" />
                </f:FormElement>

                <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                    <f:label>
                        <Label
                            text="{i18n>Form.malfunctionStart}:"
                            tooltip="{i18n>Form.malfunctionStart}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{
                            path: '/AUSVN',
                            formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                        }">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                    <Label
                        text="{
                            path: '/AUZTV',
                            formatter: 'dep.fiori.lib.util.Utilities.formatters.time'
                        }">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                </f:FormElement>

                <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                    <f:label>
                        <Label
                            text="{i18n>Form.malfunctionEnd}:"
                            tooltip="{i18n>Form.malfunctionEnd}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Label
                        text="{
                            path: '/AUSBS',
                            formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                        }">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                    <Label
                        text="{
                            path: '/AUZTB',
                            formatter: 'dep.fiori.lib.util.Utilities.formatters.time'
                        }">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Label>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18n>Form.workcenter}:"
                            tooltip="{i18n>Form.workcenter}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Input
                        showValueHelp="true"
                        valueHelpOnly="true"
                        value="{/VAPLZ}"
                        valueHelpRequest="workcenterPress">
                        <layoutData>
                            <l:GridData span="L2 M3 S6" />
                        </layoutData>
                    </Input>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18n>Form.activityType}:"
                            tooltip="{i18n>Form.activityType}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Select
                        forceSelection="false"
                        items="{activityTypes>/}"
                        selectedKey="{/ILART}">
                        <c:Item
                            key="{activityTypes>ILART}"
                            text="{activityTypes>ILART} - {activityTypes>ILATX}" />
                        <layoutData>
                            <l:GridData
                                span="L3 M3 S12">
                            </l:GridData>
                        </layoutData>
                    </Select>
                </f:FormElement>

                <f:FormElement>
                    <f:label>
                        <Label
                            text="{i18nGlobal>General.priority}:"
                            tooltip="{i18nGlobal>General.priority}">
                            <layoutData>
                                <l:GridData span="L2 M2 S12" linebreak="true" />
                            </layoutData>
                        </Label>
                    </f:label>
                    <Select
                        items="{
                            path: 'odata>/Workorder_Priority',
                            filters : [
                                { path : 'ARTPR', operator : 'EQ', value1 : 'PM'}
                            ]
                        }"
                        selectedKey="{/PRIOK}">
                        <c:Item key="{odata>PRIOK}" text="{odata>PRIOKX}" />
                        <layoutData>
                            <l:GridData
                                span="L2 M2 S12">
                            </l:GridData>
                        </layoutData>
                    </Select>
                </f:FormElement>
            </f:FormContainer>
        </f:Form>

        <beginButton>
            <Button
                text="{i18nGlobal>General.save}"
                type="Emphasized"
                press="saveWorkOrder" />
        </beginButton>

        <endButton>
            <Button
                text="{i18nGlobal>General.cancel}"
                press="closeWorkOrderDialog" />
        </endButton>
    </Dialog>
</c:FragmentDefinition>