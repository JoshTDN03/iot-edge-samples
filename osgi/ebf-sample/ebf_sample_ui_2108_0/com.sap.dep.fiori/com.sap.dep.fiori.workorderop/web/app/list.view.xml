<mvc:View
    controllerName="dep.fiori.workorderop.app.list"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:l="sap.ui.layout"
    xmlns="sap.m">
    <Page
        id="main"
        enableScrolling="false"
        showHeader="false">
        <content>
            <VBox fitContainer="true" renderType="Bare">
            <fb:FilterBar 
                id="filter-bar"
                header="{i18n>Page.title}"
                showRestoreButton="false"
                advancedMode="false"
                showClearButton="true"
                showSaveButton="true"
                clear="onClear"
                search="onFilter"
                filterBarExpanded="false">

                <fb:filterItems>
                    <fb:FilterItem
                        name="workorderNumber"
                        label="{i18n>ListItem.workOrder}">
                        <fb:control>
                            <Input id="workorderNumber" type="Text"/>
                        </fb:control>
                    </fb:FilterItem>
                    <fb:FilterItem
                        name="description"
                        label="{i18nGlobal>General.description}" >
                        <fb:control>
                            <Input id="description" type="Text"/>
                        </fb:control>
                    </fb:FilterItem>
                    <fb:FilterItem
                        name="orderStatus"
                        label="{i18n>ListItem.orderStatus}" >
                        <fb:control>
                            <Input id="orderStatus" type="Text"/>
                        </fb:control>
                    </fb:FilterItem>
                    <fb:FilterItem
                        name="equipment"
                        label="{i18nGlobal>General.equipment}" >
                        <fb:control>
                            <Input id="equipment" type="Text"/>
                        </fb:control>
                    </fb:FilterItem>
                    <fb:FilterItem
                        name="mainWorkCenter"
                        label="{i18n>ListItem.mainWorkCenter}" >
                        <fb:control>
                            <Input id="mainWorkCenter" type="Text"/>
                        </fb:control>
                    </fb:FilterItem>
                    <fb:FilterItem
                        name="orderDueDate"
                        label="{i18n>ListItem.orderDueDate}">
                        <fb:control>
                            <DatePicker
                                id="orderDueDate"/>
                        </fb:control>
                    </fb:FilterItem>
                 </fb:filterItems>
            </fb:FilterBar>
            <Toolbar class="sapMTB-Transparent-CTX sapMTB">
                <Title
                    id="tableTitle"
                    text=""
                    level="H2"/>
                <ToolbarSpacer />
                <Button
                    tooltip="{i18n>Page.createWorkorder}"
                    icon="sap-icon://add"
                    press="onCreateWorkorder" />
                <Button
                    tooltip="{i18n>List.sort}"
                    icon="sap-icon://drop-down-list"
                    press="handleViewSettingsDialogButtonPressed" />
            </Toolbar>
            <Table 
                showNoData="false">
                <columns>
                    <Column demandPopin="true">
                        <Text text="{i18n>ListItem.workOrder}" />
                    </Column>
                    <Column demandPopin="true" minScreenWidth="Tablet">
                        <Text text="{i18nGlobal>General.description}" />
                    </Column>
                    <Column demandPopin="true" minScreenWidth="Tablet">
                        <Text text="{i18n>ListItem.orderStatus}" />
                    </Column>
                    <Column demandPopin="true" minScreenWidth="Tablet">
                        <Text text="{i18nGlobal>General.equipment}" />
                    </Column>
                    <Column demandPopin="true" minScreenWidth="Tablet">
                        <Text text="{i18n>ListItem.mainWorkCenter}" />
                    </Column>
                    <Column demandPopin="true" >
                        <Text text="{i18n>ListItem.orderDueDate}" />
                    </Column>
                </columns>
            </Table>
            <ScrollContainer
                vertical="true"
                height="100%"
                width="100%">
                <Table 
                    noDataText="{i18n>List.empty}" 
                    id="enter-workorder-table"
                    items="{path:'ODATA_MODEL>/Workorder', sorter: {path: 'AUFNR', descending: true}}"
                    growing="true"
                    growingScrollToLoad="true">
                    <columns>
                        <Column demandPopin="true">
                            <Text text="{i18n>ListItem.workOrder}" />
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18nGlobal>General.description}" />
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>ListItem.orderStatus}" />
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18nGlobal>General.equipment}" />
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>ListItem.mainWorkCenter}" />
                        </Column>
                        <Column demandPopin="true" >
                            <Text text="{i18n>ListItem.orderDueDate}" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem type="Active" press="navToEditWorkOrder">
                            <cells>
                                <Label text="{ODATA_MODEL>AUFNR}" class="workorderNumberLabelBlue" design="Bold"/>
                                <Text text="{ODATA_MODEL>KTEXT}"/>
                                <Label text="{ODATA_MODEL>USER_STATUS}"/>
                                <Label text="{ODATA_MODEL>EQUNR}"/>
                                <Label text="{ODATA_MODEL>VAPLZ}"/>
                                <Label text="{path: 'ODATA_MODEL>GLTRP/', formatter: 'dep.fiori.lib.util.Utilities.date.toShortDate'}" design="Bold"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </ScrollContainer>
            </VBox>
        </content>
    </Page>
</mvc:View>