<mvc:View
    controllerName="dep.fiori.inventory.app.create"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:l="sap.ui.layout"
    xmlns:c="sap.ui.core"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false"
        enableScrolling="false">
        <u:ObjectPageLayout useIconTabBar="true">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Create.title}" />
            </u:headerTitle>

            <u:headerContent>
                <l:Grid
                    vSpacing="0"
                    defaultSpan="L3 M4 S6">
                    <VBox
                        fitContainer="true"
                        renderType="Bare">
                        <Label text="{i18n>Create.createFrom}:" />
                        <Select change="onSelectMode">
                            <c:Item text="{i18n>Create.materialList}" key="materialList" />
                            <c:Item text="{i18n>Create.binRange}" key="binRange" />
                        </Select>
                    </VBox>
                    <VBox
                        fitContainer="true"
                        renderType="Bare">
                        <Label
                            text="{i18nGlobal>General.location}:"
                            required="true" />
                        <Select
                            items="{lookup>/location}"
                            selectedKey="{= ${location>/current} }"
                            change="onSelectLocation"
                            valueState="{= !${location>/current} ? 'Error' : 'None' }"
                            forceSelection="false">
                            <c:Item text="{lookup>LGORT}" key="{lookup>LGORT}" />
                        </Select>
                    </VBox>
                    <VBox
                        fitContainer="true"
                        renderType="Bare"
                        visible="{= ${mode>/create} === 'binRange' }">
                        <Label
                            text="{i18n>Bin.start}:"
                            required="true" />
                        <Select
                            items="{lookup>/bin}"
                            selectedKey="{bin>/start}"
                            enabled="{= !!${location>/current} }"
                            valueState="{= ${bin>/start} === ' ' ? 'Error' : 'None' }"
                            >
                            <c:Item text="{lookup>LGPBE}" key="{lookup>LGPBE}" />
                        </Select>
                        <layoutData>
                            <l:GridData linebreak="true" />
                        </layoutData>
                    </VBox>
                    <VBox
                        fitContainer="true"
                        renderType="Bare"
                        visible="{= ${mode>/create} === 'binRange' }">
                        <Label text="{i18n>Bin.end}:" />
                        <Select
                            items="{lookup>/bin}"
                            selectedKey="{bin>/end}"
                            enabled="{= !!${location>/current} }">
                            <c:Item text="{lookup>LGPBE}" key="{lookup>LGPBE}" />
                        </Select>
                    </VBox>
                </l:Grid>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection>
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <Table
                                    noDataText="{i18n>List.empty}"
                                    growing="true"
                                    items="{/}"
                                    mode="Delete"
                                    delete="onRemoveMaterial"
                                    growingScrollToLoad="true">
                                    <headerToolbar>
                                        <Toolbar>
                                            <Title text="{i18nGlobal>General.items} ({/length})" />
                                            <ToolbarSpacer />
                                            <Button
                                                tooltip="{i18n>Create.addMaterial}"
                                                icon="sap-icon://add"
                                                visible="{= ${mode>/create} === 'materialList' }"
                                                enabled="{= !!${location>/current} }"
                                                press="onAddMaterial" />
                                            <Button
                                                text="{i18n>Bin.getFromRange}"
                                                type="Emphasized"
                                                visible="{= ${mode>/create} === 'binRange' }"
                                                enabled="{= !!${location>/current} }"
                                                press="onLoadBinRange" />
                                        </Toolbar>
                                    </headerToolbar>
                                    <columns>
                                        <Column vAlign="Middle">
                                            <Title
                                                text="{i18nGlobal>General.material}"
                                                tooltip="{i18nGlobal>General.material}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            width="35%"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18nGlobal>General.description}"
                                                tooltip="{i18nGlobal>General.description}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18n>Material.partNumber}"
                                                tooltip="{i18n>Material.partNumber}" />
                                        </Column>
                                        <Column vAlign="Middle">
                                            <Title
                                                text="{i18n>Material.bin}"
                                                tooltip="{i18n>Material.bin}" />
                                        </Column>
                                    </columns>
                                    <ColumnListItem>
                                        <Label
                                            text="{MATNR}"
                                            tooltip="{MATNR}"
                                            design="Bold"
                                            class="identifierTextBlue" />
                                        <Label
                                            text="{MAKTX}"
                                            tooltip="{MAKTX}" />
                                        <Label
                                            text="{MFRPN}"
                                            tooltip="{MFRPN}" />
                                        <Label
                                            text="{LGPBE}"
                                            tooltip="{LGPBE}"
                                            design="Bold" />
                                    </ColumnListItem>
                                </Table>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    text="{i18nGlobal>General.save}"
                    type="Emphasized"
                    enabled="{= ${/length} > 0 }"
                    press="onSaveDocument" />
                <Button
                    text="{i18nGlobal>General.cancel}"
                    press="onCancel" />
            </Toolbar>
        </footer>
    </Page>
</mvc:View>