<mvc:View
    controllerName="dep.fiori.material.app.display"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:c="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:u="sap.uxap"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false">
        <u:ObjectPageLayout
            useIconTabBar="true"
            enableLazyLoading="true">
            <u:headerTitle>
                <u:ObjectPageHeader
                    objectTitle="{i18nGlobal>General.material} {/MATNR}">
                    <u:ObjectPageHeaderActionButton
                        icon="sap-icon://message-error"
                        tooltip="{i18nGlobal>General.hasEdgeErrors}"
                        importance="High"
                        visible="{= !!${/EDGE_ERRORS} }"
                        type="Reject"
                        press="handleResponsivePopoverPress" />
                </u:ObjectPageHeader>
            </u:headerTitle>
            <u:headerContent>
                <VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox renderType="Bare">
                        <Label
                            text="{i18nGlobal>General.plant}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{/WERKS}" />
                    </HBox>
                    <HBox renderType="Bare">
                        <Label
                            text="{i18n>Material.storageLocation}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{/LGORT}" />
                    </HBox>
                </VBox>
            </u:headerContent>
            <u:ObjectPageSection title="{i18nGlobal>General.details}">
                <u:ObjectPageSubSection>
                    <u:blocks>
                        <f:Form>
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    singleContainerFullSize="true"
                                    labelSpanL="2"
                                    columnsL="12"
                                    columnsM="12" />
                            </f:layout>
                            <f:toolbar>
                                <Toolbar class="sapUiTinyMarginBottom">
                                    <Title text="{i18n>Page.title}" />
                                    <ToolbarSpacer />
                                    <Button
                                        text="{i18nGlobal>General.edit}"
                                        press="onEdit"
                                        visible="{= !${state>/editing} }" />
                                    <Button
                                        text="{i18nGlobal>General.save}"
                                        press="onSave"
                                        visible="{state>/editing}" />
                                    <Button
                                        text="{i18nGlobal>General.cancel}"
                                        press="onCancel"
                                        visible="{state>/editing}" />
                                </Toolbar>
                            </f:toolbar>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.number}:" />
                                            </f:label>
                                            <Input
                                                width="100%"
                                                value="{/MATNR}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L3 M4 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.bin}:">
                                                    <layoutData>
                                                        <l:GridData span="L1 M1 S12" />
                                                    </layoutData>
                                                </Label>
                                            </f:label>
                                            <Input
                                                width="100%"
                                                value="{/LGPBE}"
                                                showValueHelp="true"
                                                valueHelpOnly="true"
                                                valueHelpRequest="onBinValueHelp"
                                                editable="{state>/editing}">
                                                <layoutData>
                                                    <l:GridData span="L2 M3 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18nGlobal>General.description}:" />
                                            </f:label>
                                            <Input
                                                width="100%"
                                                value="{/MAKTX}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L6 M8 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18nGlobal>MaterialSelect.manufacturerPartNo}:"/>
                                            </f:label>
                                            <Input
                                                width="100%"
                                                value="{/MFRPN}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L3 M6 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.minQuantity}:" />
                                            </f:label>
                                            <Input
                                                width="100%"
                                                type="Number"
                                                value="{/BSTMI}"
                                                editable="{state>/editing}">
                                                <layoutData>
                                                    <l:GridData span="L1 M2 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.maxQuantity}:">
                                                    <layoutData>
                                                        <l:GridData span="L1 M2 S12" />
                                                    </layoutData>
                                                </Label>
                                            </f:label>
                                            <Input
                                                width="100%"
                                                type="Number"
                                                value="{/BSTMA}"
                                                editable="{state>/editing}">
                                                <layoutData>
                                                    <l:GridData span="L1 M2 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.unrestricted}:" />
                                            </f:label>
                                            <Input
                                                width="100%"
                                                type="Number"
                                                value="{/QUANT}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L1 M2 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.blocked}:">
                                                    <layoutData>
                                                        <l:GridData span="L1 M2 S12" />
                                                    </layoutData>
                                                </Label>
                                            </f:label>
                                            <Input
                                                width="100%"
                                                type="Number"
                                                value="{/SPEME}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L1 M2 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.criticality}:"/>
                                            </f:label>
                                            <Select
                                                width="100%"
                                                items="{lookup>/criticality}"
                                                selectedKey="{/MAABC}"
                                                enabled="{state>/editing}">
                                                <c:Item text="{lookup>VALUE}" key="{lookup>KEY}" />
                                                <layoutData>
                                                    <l:GridData span="L3 M6 S12" />
                                                </layoutData>
                                            </Select>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.status}:"/>
                                            </f:label>
                                            <Select
                                                width="100%"
                                                items="{lookup>/status}"
                                                selectedKey="{/MMSTA}"
                                                enabled="{state>/editing}">
                                                <c:Item text="{lookup>VALUE}" key="{lookup>KEY}" />
                                                <layoutData>
                                                    <l:GridData span="L3 M6 S12" />
                                                </layoutData>
                                            </Select>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18n>Material.locked}:" />
                                            </f:label>
                                            <Input
                                                width="100%"
                                                value="{/INV_NO_LOCAL}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L3 M6 S12" />
                                                </layoutData>
                                            </Input>
                                        </f:FormElement>
                                        <f:FormElement>
                                            <f:label>
                                                <Label text="{i18nGlobal>General.longDesc}:" />
                                            </f:label>
                                            <TextArea
                                                width="100%"
                                                rows="3"
                                                value="{/LTXT}"
                                                editable="false">
                                                <layoutData>
                                                    <l:GridData span="L6 M8 S12" />
                                                </layoutData>
                                            </TextArea>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                    </u:blocks>
                </u:ObjectPageSubSection>
            </u:ObjectPageSection>
            <u:ObjectPageSection title="{i18n>Material.openPurchaseReqs}">
                <u:ObjectPageSubSection>
                    <u:blocks>
                        <Table
                            headerText="{= ${i18n>Material.openPurchaseReqs} + ' (' + (${openPR>/length} || 0) + ')' }"
                            noDataText="{i18nGlobal>General.listEmpty}"
                            items="{openPR>/}"
                            growing="true"
                            growingScrollToLoad="true"
                            mode="SingleSelectMaster"
                            itemPress="onSelectPR">
                            <columns>
                                <Column vAlign="Middle">
                                    <Title
                                        text="{i18n>PR.number}"
                                        tooltip="{i18n>PR.number}" />
                                </Column>
                                <Column vAlign="Middle">
                                    <Title
                                        text="{i18n>PR.localNumber}"
                                        tooltip="{i18n>PR.localNumber}" />
                                </Column>
                                <Column
                                    vAlign="Middle"
                                    minScreenWidth="Tablet"
                                    demandPopin="true"
                                    popinDisplay="Inline">
                                    <Title
                                        text="{i18n>PR.lastUpdated}"
                                        tooltip="{i18n>PR.lastUpdated}" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem type="Active">
                                    <cells>
                                        <Label
                                            text="{openPR>BANFN}"
                                            tooltip="{openPR>BANFN}" />
                                        <Label
                                            text="{openPR>PR_NO_LOCAL}"
                                            tooltip="{openPR>PR_NO_LOCAL}" />
                                        <Label
                                            text="{
                                                path: 'openPR>ERDAT',
                                                formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                                            }"
                                            tooltip="{
                                                path: 'openPR>ERDAT',
                                                formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                                            }" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </u:blocks>
                </u:ObjectPageSubSection>
            </u:ObjectPageSection>
            <u:ObjectPageSection title="{i18n>Material.openPurchaseOrders}">
                <u:ObjectPageSubSection>
                    <u:blocks>
                        <Table
                            headerText="{= ${i18n>Material.openPurchaseOrders} + ' (' + (${openPO>/length} || 0) + ')' }"
                            noDataText="{i18nGlobal>General.listEmpty}"
                            items="{openPO>/}"
                            growing="true"
                            growingScrollToLoad="true"
                            mode="SingleSelectMaster"
                            itemPress="onSelectPO">
                            <columns>
                                <Column
                                    vAlign="Middle"
                                    width="auto">
                                    <Title
                                        text="{i18n>PO.number}"
                                        tooltip="{i18n>PO.number}" />
                                </Column>
                                <Column
                                    vAlign="Middle"
                                    width="auto">
                                    <Title
                                        text="{i18nGlobal>General.date}"
                                        tooltip="{i18nGlobal>General.date}" />
                                </Column>
                                <Column
                                    vAlign="Middle"
                                    width="50%"
                                    minScreenWidth="Tablet"
                                    demandPopin="true"
                                    popinDisplay="Inline">
                                    <Title
                                        text="{i18nGlobal>General.description}"
                                        tooltip="{i18nGlobal>General.description}" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem type="Active">
                                    <cells>
                                        <Label
                                            text="{openPO>EBELN}"
                                            tooltip="{openPO>EBELN}"
                                            design="Bold"
                                            class="identifierTextBlue sapUiTinyMarginEnd" />
                                        <Label
                                            text="{
                                                path: 'openPO>BEDAT',
                                                formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                                            }"
                                            tooltip="{
                                                path: 'openPO>BEDAT',
                                                formatter: 'dep.fiori.lib.util.Utilities.formatters.date'
                                            }" />
                                        <Label
                                            text="{openPO>NAME1}"
                                            tooltip="{openPO>NAME1}" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </u:blocks>
                </u:ObjectPageSubSection>
            </u:ObjectPageSection>
        </u:ObjectPageLayout>
    </Page>
</mvc:View>