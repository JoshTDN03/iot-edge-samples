<mvc:View
    controllerName="dep.fiori.manifest.app.detail"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:c="sap.ui.core"
    xmlns:u="sap.uxap"
    xmlns:blocks="dep.fiori.manifest.block"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false"
        enableScrolling="false">
        <u:ObjectPageLayout
            id="content"
            alwaysShowContentHeader="true"
            useIconTabBar="true"
            navigate="onBlockSelect">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Manifest.id}: {details>/MANIFEST_ID}" />
            </u:headerTitle>

            <u:headerContent>
                <VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox renderType="Bare">
                        <Label
                            text="{i18n>Manifest.plant}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{details>/WERKS}" />
                    </HBox>
                </VBox>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection
                    id="containerItems"
                    title="{i18n>Items.title}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <blocks:Items/>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
                <u:ObjectPageSection
                    id="containerdetails"
                    title="{i18n>Details.title}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <blocks:ContainerDetails/>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
                <u:ObjectPageSection
                    id="history"
                    title="{i18n>History.title}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <ScrollContainer
                                    vertical="true"
                                    height="100%"
                                    width="100%">
                                    <Table
                                        noDataText="{i18nGlobal>General.listEmpty}"
                                        growing="true"
                                        items="{history>/}"
                                        growingScrollToLoad="true">
                                        <headerToolbar>
                                            <Toolbar>
                                                <Title text="{i18nGlobal>General.items} ({history>/length})" />
                                                <ToolbarSpacer />
                                                <Button
                                                    tooltip="{i18nGlobal>General.listRefresh}"
                                                    icon="sap-icon://refresh"
                                                    press="refreshHistory" />
                                            </Toolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column
                                                vAlign="Middle">
                                                <Text
                                                    text="{i18n>Container.status}"
                                                    tooltip="{i18n>Container.status}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Container.sourceLoc}"
                                                    tooltip="{i18n>Container.sourceLoc}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Container.targetLoc}"
                                                    tooltip="{i18n>Container.targetLoc}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Container.statusChangeDate}"
                                                    tooltip="{i18n>Container.statusChangeDate}" />
                                            </Column>
                                        </columns>
                                        <ColumnListItem type ="Active">
                                            <cells>
                                                <Label
                                                    text="{history>CONTAINER_STATUS}"
                                                    tooltip="{history>CONTAINER_STATUS}"
                                                    design="Bold"
                                                    class="identifierTextBlue" />
                                                <Label
                                                    text="{history>SOURCE_LOC}"
                                                    tooltip="{history>SOURCE_LOC}" />
                                                <Label
                                                    text="{history>TARGET_LOC}"
                                                    tooltip="{history>TARGET_LOC}" />
                                                <Label
                                                    text="{
                                                        parts: [
                                                            'history>CHANGE_DATE',
                                                            'history>CHANGE_TIME'
                                                        ],
                                                        formatter: 'dep.fiori.lib.util.Utilities.formatters.dateTime'
                                                    }"
                                                    tooltip="{
                                                        parts: [
                                                            'history>CHANGE_DATE',
                                                            'history>CHANGE_TIME'
                                                        ],
                                                        formatter: 'dep.fiori.lib.util.Utilities.formatters.dateTime'
                                                    }" />
                                            </cells>
                                        </ColumnListItem>
                                    </Table>
                               </ScrollContainer>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Bar>
                <contentRight>
                    <Button
                        text="{i18nGlobal>General.cancel}"
                        press="onCancel"/>
                </contentRight>
            </Bar>
        </footer>
    </Page>
</mvc:View>