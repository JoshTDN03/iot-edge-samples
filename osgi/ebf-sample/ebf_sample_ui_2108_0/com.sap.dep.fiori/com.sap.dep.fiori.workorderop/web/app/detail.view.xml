<mvc:View
    controllerName="dep.fiori.workorderop.app.detail"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:c="sap.ui.core"
    xmlns:u="sap.uxap"
    xmlns="sap.m">
    <Page
        id="main"
        enableScrolling="false"
        showHeader="false">
        <u:ObjectPageLayout alwaysShowContentHeader="true">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Page.wo} # {workorder>/AUFNR}" />
            </u:headerTitle>

            <u:headerContent>
                <l:VerticalLayout width="100%">
                    <Label text="{i18nGlobal>General.description}:" required="true"/>
                    <Text
                        id="workorderDesc"
                        text="{workorder>/KTEXT}"/>
                </l:VerticalLayout>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection title="{i18n>Page.operations}" id="page" >
                    <u:subSections>
                        <u:ObjectPageSubSection id="matlistSubSection">
                            <u:blocks>
                                <ScrollContainer
                                    vertical="true"
                                    height="100%"
                                    width="100%">
                                    <Table 
                                        id="woOperationsList"
                                        noDataText="{i18n>List.empty}"
                                        items="{/}"
                                        growing="true"
                                        includeItemInSelection="true"
                                        growingScrollToLoad="true"
                                        mode="{= ${allowDelete>/} === 'Y' ? 'Delete' : 'None' }"
                                        delete="removeOperation">
                                        <headerToolbar>
                                            <Toolbar>
                                                <Title
                                                    id="tableTitle"
                                                    text="{ path: '/length', formatter: '.formatters.listTitle' }"
                                                    level="H2"/>
                                                <ToolbarSpacer></ToolbarSpacer>
                                                <Button
                                                    id="operationAddButton"
                                                    tooltip="{i18n>Tooltip.addMaterial}"
                                                    icon="sap-icon://add"
                                                    enabled="false"
                                                    press="navToCreateOperation" />
                                            </Toolbar>
                                        </headerToolbar>

                                        <columns>
                                            <Column vAlign="Middle">
                                                <Text text="{i18n>List.operation}"/>
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                width="35%"
                                                demandPopin="true"
                                                minScreenWidth="Desktop"
                                                popinDisplay="Inline">
                                                <Text text="{i18n>List.operationShortText}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                demandPopin="true"
                                                minScreenWidth="Tablet"
                                                popinDisplay="Inline">
                                                <Text text="{i18n>List.controlKey}" />
                                            </Column>
                                            <Column vAlign="Middle">
                                                <Text text="{i18n>List.workCenter}" />
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem type="Active" press="handleTableSelectDialogPress">
                                                <cells>
                                                    <Label
                                                        id="operationId"
                                                        text="{path: 'VORNR', formatter: '.formatters.pendingVornr'}"
                                                        class="operationsLabelBlue"
                                                        design="Bold"/>
                                                    <Input
                                                        id="shortTextInput"
                                                        value="{LTXA1}"/>
                                                    <Select
                                                        id="opControlKeySelect"
                                                        forceSelection="false"
                                                        selectedKey="{STEUS}"
                                                        items="{path: 'COMBO_BOX_MODEL>/Control_Key_List', templateShareable: 'false'}">
                                                        <c:ListItem key="{COMBO_BOX_MODEL>STEUS}" text="{COMBO_BOX_MODEL>STEUS}" />
                                                    </Select>
                                                    <Select
                                                        id="opWorkcenterSelect"
                                                        forceSelection="false"
                                                        width="100%"
                                                        selectedKey="{ARBPL}"
                                                        items="{path: 'COMBO_BOX_MODEL>/Workcenter', templateShareable: 'false'}">
                                                        <c:ListItem key="{COMBO_BOX_MODEL>VAPLZ}" text="{COMBO_BOX_MODEL>VAPLZ}" />
                                                    </Select>
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </ScrollContainer>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection> 
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Bar id="otbFooter">
                <contentRight>
                    <Button
                        id="save-button"
                        type="Emphasized"
                        text="{i18nGlobal>General.save}"
                        press="saveOperations"/>
                    <Button
                        id="cancel-button"
                        text="{i18nGlobal>General.cancel}"
                        press="cancel"/>
                </contentRight>
            </Bar>
        </footer> 
    </Page>
</mvc:View>