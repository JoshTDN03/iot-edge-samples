<mvc:View
    controllerName="dep.fiori.reportedincidents.app.propertyDetails"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.uxap"
    xmlns="sap.m">
    <Page
        id="main"
        showHeader="false">
        <u:ObjectPageLayout alwaysShowContentHeader="true" useIconTabBar="true" showTitleInHeaderContent="false">
            <u:headerTitle>
				<u:ObjectPageHeader class="pageBreakCrumbs" objectTitle="{i18n>ObjectPageContentHeader.propertyDesc}: {INVOLVED_PROPERTY_DETAILS>/PROP_DESC}" isObjectTitleAlwaysVisible="true">				
					<Breadcrumbs currentLocationText="{INVOLVED_PROPERTY_DETAILS>/PROP_DESC}">
						<Link press="navToAssetList" text="{INVOLVED_PROPERTY_DETAILS>/ID_LOCAL}"/>
					</Breadcrumbs>
				</u:ObjectPageHeader>				
            </u:headerTitle>
			
            <u:headerContent>
				<VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox renderType="Bare">
					    <VBox>                                  
							<HBox renderType="Bare">
								<Label
									text="{i18n>ObjectPageContentHeader.incidentID}:"
									class="sapUiTinyMarginEnd" />
								<Label text="{INVOLVED_PROPERTY_DETAILS>/ID_LOCAL}"/>
							</HBox>
						</VBox>
					</HBox>
                   
                </VBox>	
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection title="{i18n>ObjectPageSection.equipmentDetailBasic}" id="page" >
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
								<VBox fitContainer="true" renderType="Bare">
                                <f:Form id="form">

                                    <f:layout>
                                        <f:ResponsiveGridLayout
                                            hSpacing="2"
                                            /> 
                                    </f:layout>
                                    <f:toolbar>
										<Toolbar class="sapUiTinyMarginBottom">
											<Title text="{i18n>FormContainer.reportedincidents}" />										
											<ToolbarSpacer />
											<HBox visible="{= ${INVOLVED_PROPERTY_DETAILS>/IS_SUBMITTED} === ''}">
												<Button
													text="{i18nGlobal>General.edit}"
													id="propertyEditButton"
													press="onPropertyEdit"
													visible="{= !${state>/editing}}" />
												<Button
													id="propertySaveButton"
													text="{i18nGlobal>General.save}"
													press="onPropertySave"
													visible="{state>/editing}" />
												<Button
													text="{i18nGlobal>General.cancel}"
													press="onPropertyCancel"
													visible="{state>/editing}" />
											</HBox>
										</Toolbar>
									</f:toolbar>
                                    <f:formContainers>
                                        <f:FormContainer>
										    <f:formElements>
												<f:FormElement>
														<Label text="{i18n>PropertyForm.TitleWhat}" design="Bold">
															<layoutData>
																<l:GridData
																	span="L12 M12 S12">
																</l:GridData>
															</layoutData>
														</Label>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.property}"/>
													</f:label>
													<f:fields>
														<Input
															id="assetID"
															showValueHelp="true"
															value="{INVOLVED_PROPERTY_DETAILS>/ASSET_ID}"
															valueHelpOnly="true"
															class="sapUiSmallMarginBottom"
															enabled="false"
															editable="{state>/editing}"
															valueHelpRequest="propertyLookupPress">															
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
														<Input
															id="assetType"
															value="{INVOLVED_PROPERTY_DETAILS>/ASSET_TYPE}"
															visible="false">
														</Input>
														<Input
															id="assetLineNumber"
															value="{INVOLVED_PROPERTY_DETAILS>/ASSET_LINE_NO}"
															visible="false">
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.desc}"
															required="true">
														</Label>
													</f:label>
													<f:fields>
														<Input
															id="propDesc"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_DESC}"
															maxLength="40"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.type}"/>
													</f:label>
													<f:fields>
														<Input
															styleClass="sapUiBigMarginBottom"
															id="propType" 
															showValueHelp="true"															
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TYPE}"
															valueHelpOnly="true"
															valueHelpRequest="equipmentTypeLookupPress"
															editable="{state>/editing}">															
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
																				
													</f:fields>
												</f:FormElement>
												<!--<f:FormElement>
													<f:label>
														<Label text="{i18n>PropertyForm.plantId}" required="false"/>
													</f:label>

													<f:fields>
														<Input
															id="pPlantID"
															value="{plantIDModel>/PLANT_ID}"
															enabled="false">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>-->
												
												<f:FormElement>
													<f:label>
														<Label text="{i18n>PropertyForm.locDesc}"/>
													</f:label>
													
													<f:fields>
														<TextArea
															id="locDesc"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_LOC_DESC}"
															rows="4"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</TextArea>
													</f:fields>
												</f:FormElement>
												
												<f:FormElement>
													<f:label>
														<Label text="{i18n>PropertyForm.addDesc}"/>
													</f:label>
													
													<f:fields>
														<TextArea
															id="addDesc"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_ADD_DESC}"
															rows="4"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</TextArea>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
														<Label text="{i18n>PropertyForm.TitleWhoOwner}" design="Bold">
															<layoutData>
																<l:GridData
																	span="L12 M12 S12">
																</l:GridData>
															</layoutData>
														</Label>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.firstname}"
														/>
													</f:label>
													<f:fields>
														<Input
															id="pofirstName"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_FNAME}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.lastname}"
														/>
													</f:label>
													<f:fields>
														<Input
															id="polastName"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_LNAME}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.org}"/>
													</f:label>
													<f:fields>
														<Input
															styleClass="sapUiBigMarginBottom"
															id="poOrgUnitID"                                    
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_ORG}"
															maxLength="40"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
																				
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.company}"/>
													</f:label>
													<f:fields>
														<Input
															id="pocompany" 
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_COMPANY}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.address}"/>
													</f:label>
													<f:fields>
														<Input
															id= "poaddress"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_ADDRESS}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												 <f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.phone}"/>
													</f:label>
													<f:fields>          
														<Input
															id="pophone"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_PHONE}"
															maxLength="40"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>						
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.email}"/>
													</f:label>
													<f:fields>                     
														<Input
															id="poemail"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_OWNER_EMAIL}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												
												<f:FormElement>
														<Label text="{i18n>PropertyForm.TitleWhoTenant}" design="Bold">
															<layoutData>
																<l:GridData
																	span="L12 M12 S12">
																</l:GridData>
															</layoutData>
														</Label>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.firstname}"
														/>
													</f:label>
													<f:fields>
														<Input
															id="ptfirstName"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_FNAME}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.lastname}"
														/>
													</f:label>
													<f:fields>
														<Input
															id="ptlastName"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_LNAME}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.org}"/>
													</f:label>
													<f:fields>
														<Input
															styleClass="sapUiBigMarginBottom"
															id="ptOrgUnitID"                                    
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_ORG}"
															maxLength="40"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
																				
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.company}"/>
													</f:label>
													<f:fields>
														<Input
															id="ptcompany" 
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_COMPANY}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.address}"/>
													</f:label>
													<f:fields>
														<Input
															id= "ptaddress"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_ADDRESS}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												 <f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.phone}"/>
													</f:label>
													<f:fields>          
														<Input
															id="ptphone"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_PHONE}"
															maxLength="40"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>						
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>PropertyForm.email}"/>
													</f:label>
													<f:fields>                     
														<Input
															id="ptemail"
															value="{INVOLVED_PROPERTY_DETAILS>/PROP_TENANT_EMAIL}"
															maxLength="60"
															class="sapUiSmallMarginBottom"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>

                                            </f:formElements>
                                        </f:FormContainer>
                                    </f:formContainers>
                                </f:Form>
								<Toolbar><Title text="{i18n>AssetDamages.damageListSectionTitle}" />		</Toolbar>
								<Table
									noDataText="{i18n>AssetDamages.listEmpty}"
									items="{INVOLVED_EQUIPMENT_DAMAGES>/results/}"
									growing="true"
									growingScrollToLoad="true">
									<headerToolbar>
                                            <Toolbar>
                                                <Title
                                                    id="damageTableTitle"
                                                    text="{ path: 'INVOLVED_EQUIPMENT_DAMAGES>/results/length', formatter: '.formatters.damageListTitle' }"
                                                    level="H2"/>
                                                <ToolbarSpacer></ToolbarSpacer>
                                                <Button
                                                    id="damageAddButton"
                                                    tooltip="{i18n>Tooltip.addDamageButton}"
                                                    icon="sap-icon://add"
													visible="{= ${INVOLVED_PROPERTY_DETAILS>/IS_SUBMITTED} === ''}"
                                                    press="createEquipmentDamage" /> 		
                                            </Toolbar>
                                        </headerToolbar>
									<columns>
										<Column vAlign="Middle">
											<Title text="{i18n>AssetDamages.type}" />
										</Column>
										<Column vAlign="Middle">
											<Title text="{i18n>AssetDamages.description}" />
										</Column>										
										<Column
											vAlign="Middle"
											hAlign="End" />
										</columns>
									<ColumnListItem vAlign="Middle" type="Active"  press="navToAddEquipmentDamage">
										<Label
											text="{INVOLVED_EQUIPMENT_DAMAGES>DAMAGE_TYPE}"/>
										<Label
											text="{INVOLVED_EQUIPMENT_DAMAGES>ASSET_DAMAGE_DESC}"/>
										<Button
												icon="sap-icon://sys-cancel"
												type="Transparent"
												tooltip="{i18n>AssetDamages.removeDamage}"
												visible="{= ${INVOLVED_PROPERTY_DETAILS>/IS_SUBMITTED} === ''}"
												press="removeEquipmentDamagePress" />
									</ColumnListItem>
								</Table>
								<!--<core:Fragment fragmentName="dep.fiori.reportedincidents.app.Damages" type="XML" />-->
								</VBox>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

    </Page>
</mvc:View>