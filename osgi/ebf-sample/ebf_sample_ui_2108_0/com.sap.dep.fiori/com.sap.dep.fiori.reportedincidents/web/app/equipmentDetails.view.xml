<mvc:View
    controllerName="dep.fiori.reportedincidents.app.equipmentDetails"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.uxap"
    xmlns="sap.m">
    <Page
        id="main"
        showHeader="false">
        <u:ObjectPageLayout alwaysShowContentHeader="true" useIconTabBar="true" showTitleInHeaderContent="false">
            <u:headerTitle>
            <!--<u:ObjectPageHeader objectTitle="{i18n>ObjectPageHeader.equipmentDetailsTitle}" isObjectTitleAlwaysVisible="true">-->
				<u:ObjectPageHeader class="pageBreakCrumbs" objectTitle="{i18n>ObjectPageContentHeader.equipmentDesc}: {INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_DESC}" isObjectTitleAlwaysVisible="true">				
					<Breadcrumbs currentLocationText="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_DESC}">
						<Link press="navToAssetList" text="{INVOLVED_EQUIPMENT_DETAILS>/ID_LOCAL}"/>
					</Breadcrumbs>
				</u:ObjectPageHeader>
            </u:headerTitle>
			
            <u:headerContent>
				<VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox renderType="Bare">
					    <!-- <Button id="equipmentIcon" icon="sap-icon://machine" class="sapUiSmallMarginEnd"/>-->
					    <VBox>                                  
					       <!-- <HBox renderType="Bare">
								<Label
									text="{i18n>ObjectPageContentHeader.equipmentDesc}"
									class="sapUiTinyMarginEnd" />
								<Label text="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_DESC}"/>
							</HBox>-->
							<HBox renderType="Bare">
								<Label
									text="{i18n>ObjectPageContentHeader.incidentID}:"
									class="sapUiTinyMarginEnd" />
								<Label text="{INVOLVED_EQUIPMENT_DETAILS>/ID_LOCAL}"/>
							</HBox>
						</VBox>
					</HBox>
                   
                </VBox>	
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection title="{i18n>ObjectPageSection.equipmentDetailBasic}" id="page" >
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
								<VBox fitContainer="true" renderType="Bare">
                                <f:Form id="form">

                                    <f:layout>
                                        <f:ResponsiveGridLayout
                                            hSpacing="2"
                                            /> 
                                    </f:layout>
                                    <f:toolbar>
										<Toolbar class="sapUiTinyMarginBottom">
											<Title text="{i18n>FormContainer.reportedincidents}" />										
											<ToolbarSpacer />
											<HBox visible="{= ${INVOLVED_EQUIPMENT_DETAILS>/IS_SUBMITTED} === ''}">
												<Button
													text="{i18nGlobal>General.edit}"
													id="equipmentEditButton"
													press="onEquipmentEdit"
													visible="{= !${state>/editing}}" />
												<Button
													id="equipmentSaveButton"
													text="{i18nGlobal>General.save}"
													press="onEquipmentSave"
													visible="{state>/editing}" />
												<Button
													text="{i18nGlobal>General.cancel}"
													press="onEquipmentCancel"
													visible="{state>/editing}" />
											</HBox>
										</Toolbar>
									</f:toolbar>
                                    <f:formContainers>
                                        <f:FormContainer>
										    <f:formElements>
												<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.equipmentNumber}"/>
													</f:label>
													<f:fields>
														<Input 
															id="assetID"
															showValueHelp="true"
															value="{INVOLVED_EQUIPMENT_DETAILS>/ASSET_ID}"
															valueHelpOnly="true"
															editable="{state>/editing}"
															enabled="false"
															valueHelpRequest="equipmentLookupPress">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
														<Input
															id="assetType"
															value="{INVOLVED_EQUIPMENT_DETAILS>/ASSET_TYPE}"
															visible="false">
														</Input>
														<Input
															id="assetLineNumber"
															value="{INVOLVED_EQUIPMENT_DETAILS>/ASSET_LINE_NO}"
															visible="false">
														</Input>
													</f:fields>
												</f:FormElement>																						
												<f:FormElement>
													<f:label>
														<Label
															text="{i18n>EquipmentForm.equipmentDesc}"
															required="true"
															editable="{state>/editing}"/>
													</f:label>
													<f:fields>
														<Input
															id="equipmentDesc"
															value="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_DESC}"
															maxLength="40"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
											
												<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.equipmentType}"/>
													</f:label>
													<f:fields>
														<Input 
															id="equipmentType"
															showValueHelp="true"
															value="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_TYPE}"
															valueHelpOnly="true"
															editable="{state>/editing}"
															valueHelpRequest="equipmentTypeLookupPress">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<!--<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.plantID}"/>
													</f:label>

													<f:fields>
														<Input
															id="equipmentPlantID"
															value="{plantIDModel>/PLANT_ID}"
															enabled="false"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>-->
												<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.equipmentFLocation}"/>
													</f:label>
													<f:fields>
														<Input 
															id="equipmentFLocation"
															showValueHelp="true"
															value="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_FLOC}"
															valueHelpOnly="true"
															editable="{state>/editing}"
															valueHelpRequest="equipmentFLocationLookupPress">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</Input>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.equipmentLocationDesc}"/>
													</f:label>
													<f:fields>
														<TextArea
															id="equipmentLocationDesc"
															value="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_LOC_DESC}"
															rows="4"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</TextArea>
													</f:fields>
												</f:FormElement>
												<f:FormElement>
													<f:label>
														<Label text="{i18n>EquipmentForm.equipmentAdditionalDesc}"/>
													</f:label>
													<f:fields>
														<TextArea
															id="equipmentAdditionalDesc"
															value="{INVOLVED_EQUIPMENT_DETAILS>/EQUIPMENT_ADD_DESC}"
															rows="4"
															editable="{state>/editing}">
															<layoutData>
																<l:GridData
																	span="L5 M5 S12">
																</l:GridData>
															</layoutData>
														</TextArea>
													</f:fields>
												</f:FormElement>

                                            </f:formElements>
                                        </f:FormContainer>
                                    </f:formContainers>
                                </f:Form>
								<Toolbar><Title text="{i18n>AssetDamages.damageListSectionTitle}" />		</Toolbar>
								<Table
									noDataText="{i18n>AssetDamages.listEmpty}"
									items="{INVOLVED_EQUIPMENT_DAMAGES>/results/}"
									growing="true"
									growingScrollToLoad="true">
									<headerToolbar>
                                            <Toolbar>
                                                <Title
                                                    id="damageTableTitle"
                                                    text="{ path: 'INVOLVED_EQUIPMENT_DAMAGES>/results/length', formatter: '.formatters.damageListTitle' }"
                                                    level="H2"/>
                                                <ToolbarSpacer></ToolbarSpacer>
                                                <Button
                                                    id="damageAddButton"
                                                    tooltip="{i18n>Tooltip.addDamageButton}"
                                                    icon="sap-icon://add"
													visible="{= ${INVOLVED_EQUIPMENT_DETAILS>/IS_SUBMITTED} === ''}"
                                                    press="createEquipmentDamage" /> 		
                                            </Toolbar>
                                        </headerToolbar>
									<columns>
										<Column vAlign="Middle">
											<Title text="{i18n>AssetDamages.type}" />
										</Column>
										<Column vAlign="Middle">
											<Title text="{i18n>AssetDamages.description}" />
										</Column>										
										<Column
											vAlign="Middle"
											hAlign="End" />
										</columns>
									<ColumnListItem vAlign="Middle" type="Active"  press="navToAddEquipmentDamage">
										<Label
											text="{INVOLVED_EQUIPMENT_DAMAGES>DAMAGE_TYPE}"/>
										<Label
											text="{INVOLVED_EQUIPMENT_DAMAGES>ASSET_DAMAGE_DESC}"/>
										<Button
												icon="sap-icon://sys-cancel"
												type="Transparent"
												tooltip="{i18n>AssetDamages.removeDamage}"
												visible="{= ${INVOLVED_EQUIPMENT_DETAILS>/IS_SUBMITTED} === ''}"
												press="removeEquipmentDamagePress" />
									</ColumnListItem>
								</Table>
								<!--<core:Fragment fragmentName="dep.fiori.reportedincidents.app.Damages" type="XML" />-->
								</VBox>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

    </Page>
</mvc:View>