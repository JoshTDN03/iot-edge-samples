<mvc:View
    controllerName="dep.fiori.transfer.app.display"
    class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:l="sap.ui.layout"
    xmlns:c="sap.ui.core"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false"
        enableScrolling="false">
        <u:ObjectPageLayout useIconTabBar="true">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Page.title}" />
            </u:headerTitle>

            <u:headerContent>
                <l:Grid
                    vSpacing="0"
                    defaultSpan="L2 M3 S4">
                    <VBox
                        fitContainer="true"
                        renderType="Bare">
                        <Label text="{i18n>Header.destination}:" />
                        <Select
                            items="{plants>/}"
                            selectedKey="{body>/UMWRK}"
                            showSecondaryValues="true"
                            change="onChangeDestination">
                            <c:ListItem text="{plants>WERKS}" key="{plants>WERKS}" additionalText="{plants>NAME1}" />
                        </Select>
                    </VBox>
                    <VBox
                        fitContainer="true"
                        renderType="Bare">
                        <Label text="{i18nGlobal>General.location}:" />
                        <Select
                            items="{locations>/}"
                            selectedKey="{body>/UMLGO}"
                            showSecondaryValues="true">
                            <c:ListItem text="{locations>LGORT}" key="{locations>LGORT}" additionalText="{locations>LGOBE}" />
                        </Select>
                    </VBox>
                </l:Grid>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection>
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <Table
                                    noDataText="{i18n>List.empty}"
                                    growing="true"
                                    items="{/}"
                                    mode="Delete"
                                    delete="onRemoveMaterial"
                                    growingScrollToLoad="true">
                                    <headerToolbar>
                                        <Toolbar>
                                            <Title text="{i18nGlobal>General.items} ({/length})" />
                                            <ToolbarSpacer />
                                            <Button
                                                tooltip="{i18n>List.addMaterial}"
                                                icon="sap-icon://add"
                                                press="onAddMaterial" />
                                        </Toolbar>
                                    </headerToolbar>
                                    <columns>
                                        <Column vAlign="Middle">
                                            <Title
                                                text="{i18nGlobal>General.material}"
                                                tooltip="{i18nGlobal>General.material}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            width="35%"
                                            minScreenWidth="Desktop"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18nGlobal>General.description}"
                                                tooltip="{i18nGlobal>General.description}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18n>Material.location}"
                                                tooltip="{i18n>Material.location}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18n>Material.bin}"
                                                tooltip="{i18n>Material.bin}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            hAlign="Right"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                            popinDisplay="Inline">
                                            <Title
                                                text="{i18nGlobal>General.onhand}"
                                                tooltip="{i18nGlobal>General.onhand}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            hAlign="Right">
                                            <Title
                                                text="{i18nGlobal>General.quantity}"
                                                tooltip="{i18nGlobal>General.quantity}" />
                                        </Column>
                                        <Column
                                            vAlign="Middle"
                                            hAlign="Right">
                                            <Title
                                                text="{i18n>List.valuation}"
                                                tooltip="{i18n>List.valuation}" />
                                        </Column>
                                    </columns>
                                    <ColumnListItem vAlign="Middle">
                                        <Label
                                            text="{MATNR}"
                                            tooltip="{MATNR}"
                                            design="Bold"
                                            class="identifierTextBlue" />
                                        <Label
                                            text="{MAKTX}"
                                            tooltip="{MAKTX}" />
                                        <Label
                                            text="{LGORT}"
                                            tooltip="{LGORT}" />
                                        <Label
                                            text="{LGPBE}"
                                            tooltip="{LGPBE}" />
                                        <Label text="{QUANT}" />
                                        <Input
                                            placeholder="0"
                                            textAlign="Right"
                                            type="Number"
                                            value="{
                                                path: 'ERFMG',
                                                type: 'sap.ui.model.type.Integer',
                                                formatOptions: {
                                                    emptyString: null
                                                }
                                            }"
                                            valueState="{
                                                parts: ['ERFMG', 'QUANT'],
                                                formatter: '.qtyValueStateFormatter'
                                            }"
                                            valueStateText="{
                                                parts: ['ERFMG', 'QUANT'],
                                                formatter: '.qtyValueStateTextFormatter'
                                            }" />
                                        <Select
                                            items="{
                                                path: 'valuation>/',
                                                templateShareable: 'false'
                                            }"
                                            selectedKey="{BWTAR}"
                                            showSecondaryValues="true">
                                            <c:ListItem
                                                text="{valuation>CATEGORY}"
                                                key="{valuation>CATEGORY}"
                                                additionalText="{valuation>CATEGORY_DESC}" />
                                        </Select>
                                    </ColumnListItem>
                                </Table>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection>
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    text="{i18nGlobal>General.save}"
                    type="Emphasized"
                    enabled="{= ${/length} > 0 }"
                    press="onSave" />
                <Button
                    text="{i18nGlobal>General.cancel}"
                    press="onCancel" />
            </Toolbar>
        </footer>
    </Page>
</mvc:View>