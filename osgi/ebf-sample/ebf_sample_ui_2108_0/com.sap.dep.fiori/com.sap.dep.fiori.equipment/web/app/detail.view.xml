<mvc:View
    controllerName="dep.fiori.equipment.app.detail"
   class="dep-fiori"
    displayBlock="true"
    height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:c="sap.ui.core"
    xmlns:u="sap.uxap"
    xmlns:blocks="dep.fiori.equipment.block"
    xmlns="sap.m">
    <Page
        showHeader="false"
        showSubHeader="false"
        enableScrolling="false">
        <u:ObjectPageLayout 
            id="content"
            alwaysShowContentHeader="true"
            useIconTabBar="true"
            navigate="onBlockSelect">

            <u:headerTitle>
                <u:ObjectPageHeader objectTitle="{i18n>Detail.title}: {equipment>/EQUNR}" />
            </u:headerTitle>

            <u:headerContent>
                <VBox
                    fitContainer="true"
                    renderType="Bare">
                    <HBox renderType="Bare">
                        <Label
                            text="{i18nGlobal>General.description}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{equipment>/EQKTX}" />
                    </HBox>
                    <HBox renderType="Bare">
                        <Label
                            text="{i18nGlobal>General.location}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{equipment>/TPLNR}" />
                    </HBox>
                    <HBox renderType="Bare">
                        <Label
                            text="{i18nGlobal>EquipmentSelect.locationDesc}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{equipment>/PLTXT}" />
                    </HBox>
                    <HBox renderType="Bare">
                        <Label
                            text="{i18n>Equipment.costCenter}:"
                            class="sapUiTinyMarginEnd" />
                        <Label text="{equipment>/KOSTL}" />
                    </HBox>
                </VBox>
            </u:headerContent>

            <u:sections>
                <u:ObjectPageSection
                    id="attributes" 
                    title="{i18n>Detail.attributes}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <ScrollContainer
                                    vertical="true"
                                    height="100%"
                                    width="100%">
                                    <Table 
                                        noDataText="{i18nGlobal>General.listEmpty}"
                                        growing="true"
                                        items="{
                                            path: 'attributes>/',
                                            sorter: { path: 'SOURCE', group: '.attributeSourceFormatter' }
                                        }"
                                        growingScrollToLoad="true">
                                        <headerToolbar>
                                            <Toolbar>
                                                <Title text="{i18nGlobal>General.items} ({attributes>/length})" />
                                                <ToolbarSpacer />
                                                <Button
                                                    tooltip="{i18nGlobal>General.listRefresh}"
                                                    icon="sap-icon://refresh"
                                                    press="refreshAttributes" />
                                            </Toolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column vAlign="Middle">
                                                <Text
                                                    text="{i18n>Attribute.name}"
                                                    tooltip="{i18n>Attribute.name}" />
                                            </Column>
                                            <Column vAlign="Middle">
                                                <Text
                                                    text="{i18n>Attribute.value}"
                                                    tooltip="{i18n>Attribute.value}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.min}"
                                                    tooltip="{i18n>Attribute.min}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.max}"
                                                    tooltip="{i18n>Attribute.max}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.unit}"
                                                    tooltip="{i18n>Attribute.unit}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.defaultValue}"
                                                    tooltip="{i18n>Attribute.defaultValue}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.defaultMin}"
                                                    tooltip="{i18n>Attribute.defaultMin}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.defaultMax}"
                                                    tooltip="{i18n>Attribute.defaultMax}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                width="10%"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Attribute.defaultUnit}"
                                                    tooltip="{i18n>Attribute.defaultUnit}" />
                                            </Column>
                                        </columns>
                                        <ColumnListItem>
                                            <Label
                                                text="{attributes>ATTRIBUTE_NAME}" 
                                                tooltip="{attributes>ATTRIBUTE_NAME}"
                                                design="Bold"
                                                class="identifierTextBlue" />
                                            <Label
                                                text="{
                                                    parts: [ 'attributes>DATA_TYPE', 'attributes>ATTRIBUTE_VALUE1', 'attributes>ATTRIBUTE_VALUE2' ],
                                                    formatter: '.attributeValueFormatter'
                                                }"
                                                tooltip="{
                                                    parts: [ 'attributes>DATA_TYPE', 'attributes>ATTRIBUTE_VALUE1', 'attributes>ATTRIBUTE_VALUE2' ],
                                                    formatter: '.attributeValueFormatter'
                                                }" />
                                            <Label
                                                text="{attributes>MIN_THRESHOLD}"
                                                tooltip="{attributes>MIN_THRESHOLD}" />
                                            <Label
                                                text="{attributes>MAX_THRESHOLD}"
                                                tooltip="{attributes>MAX_THRESHOLD}" />
                                            <Label
                                                text="{attributes>UOM}"
                                                tooltip="{attributes>UOM}" />
                                            <Label
                                                text="{
                                                    parts: [ 'attributes>DATA_TYPE', 'attributes>DEFAULT_ATTRIBUTE_VALUE1', 'attributes>DEFAULT_ATTRIBUTE_VALUE2' ],
                                                    formatter: '.attributeValueFormatter'
                                                }"
                                                tooltip="{
                                                    parts: [ 'attributes>DATA_TYPE', 'attributes>DEFAULT_ATTRIBUTE_VALUE1', 'attributes>DEFAULT_ATTRIBUTE_VALUE2' ],
                                                    formatter: '.attributeValueFormatter'
                                                }" />
                                            <Label
                                                text="{attributes>DEFAULT_MIN_THRESHOLD}"
                                                tooltip="{attributes>DEFAULT_MIN_THRESHOLD}" />
                                            <Label
                                                text="{attributes>DEFAULT_MAX_THRESHOLD}"
                                                tooltip="{attributes>DEFAULT_MAX_THRESHOLD}" />
                                            <Label
                                                text="{attributes>DEFAULT_UOM}"
                                                tooltip="{attributes>DEFAULT_UOM}" />
                                        </ColumnListItem>
                                    </Table>
                               </ScrollContainer>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection> 
                <u:ObjectPageSection
                    id="sensors" 
                    title="{i18n>Detail.sensors}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <ScrollContainer
                                    vertical="true"
                                    height="100%"
                                    width="100%">
                                    <Table 
                                        noDataText="{i18nGlobal>General.listEmpty}"
                                        growing="true"
                                        items="{sensors>/}"
                                        growingScrollToLoad="true"
                                        itemPress="onSensorSelect">
                                        <headerToolbar>
                                            <Toolbar>
                                                <Title text="{i18nGlobal>General.items} ({sensors>/length})" />
                                                <ToolbarSpacer />
                                                <Button
                                                    tooltip="{i18nGlobal>General.listRefresh}"
                                                    icon="sap-icon://refresh"
                                                    press="refreshSensors" />
                                            </Toolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column 
                                                vAlign="Middle">
                                                <Text
                                                    text="{i18nGlobal>EquipmentSelect.equipment}"
                                                    tooltip="{i18nGlobal>EquipmentSelect.equipment}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18nGlobal>General.description}" 
                                                    tooltip="{i18nGlobal>General.description}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                minScreenWidth="Tablet"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18nGlobal>General.location}"
                                                    tooltip="{i18nGlobal>General.location}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18nGlobal>EquipmentSelect.locationDesc}" 
                                                    tooltip="{i18nGlobal>EquipmentSelect.locationDesc}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18n>Equipment.costCenter}"
                                                    tooltip="{i18n>Equipment.costCenter}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18n>Equipment.model}"
                                                    tooltip="{i18n>Equipment.model}" />
                                            </Column>
                                            <Column 
                                                vAlign="Middle"
                                                minScreenWidth="Desktop"
                                                demandPopin="true"
                                                popinDisplay="Inline">
                                                <Text 
                                                    text="{i18n>Equipment.manufacturer}"
                                                    tooltip="{i18n>Equipment.manufacturer}" />
                                            </Column>
                                        </columns>
                                        <ColumnListItem type ="Active">
                                            <cells>
                                                <Label
                                                    text="{sensors>EQUNR}"
                                                    tooltip="{sensors>EQUNR}"
                                                    design="Bold"
                                                    class="identifierTextBlue" />
                                                <Label
                                                    text="{sensors>EQKTX}"
                                                    tooltip="{sensors>EQKTX}" />
                                                <Label
                                                    text="{sensors>TPLNR}"
                                                    tooltip="{sensors>TPLNR}" />
                                                <Label
                                                    text="{sensors>PLTXT}"
                                                    tooltip="{sensors>PLTXT}" />
                                                <Label
                                                    text="{sensors>KOSTL}"
                                                    tooltip="{sensors>KOSTL}" />
                                                <Label
                                                    text="{sensors>MODEL_NAME}"
                                                    tooltip="{sensors>MODEL_NAME}" />
                                                <Label
                                                    text="{sensors>MANUFACTURER}"
                                                    tooltip="{sensors>MANUFACTURER}" />
                                            </cells>
                                        </ColumnListItem>
                                    </Table>
                               </ScrollContainer>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection> 
                <u:ObjectPageSection
                    id="hierarchy"
                    title="{i18n>Detail.hierarchy}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <blocks:Hierarchy/>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection> 
                <u:ObjectPageSection
                    id="workorders"
                    title="{i18n>Detail.workorders}">
                    <u:subSections>
                        <u:ObjectPageSubSection>
                            <u:blocks>
                                <ScrollContainer
                                    vertical="true"
                                    height="100%"
                                    width="100%">
                                    <Table 
                                        noDataText="{i18nGlobal>General.listEmpty}"
                                        growing="true"
                                        items="{workorders>/}"
                                        growingScrollToLoad="true"
                                        itemPress="onWorkOrderPress">
                                        <headerToolbar>
                                            <Toolbar>
                                                <Title text="{i18nGlobal>General.items} ({workorders>/length})" />
                                                <ToolbarSpacer />
                                                <Button
                                                    tooltip="{i18nGlobal>General.listRefresh}"
                                                    icon="sap-icon://refresh"
                                                    press="refreshWorkorders" />
                                            </Toolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column vAlign="Middle">
                                                <Text
                                                    text="{i18n>Workorder.number}"
                                                    tooltip="{i18n>Workorder.number}" />
                                            </Column>
                                            <Column vAlign="Middle">
                                                <Text
                                                    text="{i18nGlobal>General.description}"
                                                    tooltip="{i18nGlobal>General.description}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                demandPopin="true"
                                                minScreenWidth="Tablet"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Workorder.userStatus}"
                                                    tooltip="{i18n>Workorder.userStatus}" />
                                            </Column>
                                            <Column
                                                vAlign="Middle"
                                                demandPopin="true"
                                                minScreenWidth="Desktop"
                                                popinDisplay="Inline">
                                                <Text
                                                    text="{i18n>Workorders.lastUpdatedAtPlantTs}"
                                                    tooltip="{i18n>Workorders.lastUpdatedAtPlantTs}" />
                                            </Column>
                                        </columns>
                                        <ColumnListItem type ="Active">
                                            <cells>
	                                            <Label
	                                                text="{workorders>AUFNR}"
	                                                tooltip="{workorders>AUFNR}"
	                                                design="Bold"
	                                                class="identifierTextBlue" />
	                                            <Label
	                                                text="{workorders>KTEXT}"
	                                                tooltip="{workorders>KTEXT}" />
	                                            <Label
	                                                text="{workorders>USER_STATUS}"
	                                                tooltip="{workorders>USER_STATUS}" />
	                                            <Label
	                                                text="{workorders>LastUpdatedAtPlantTs}"
	                                                tooltip="{workorders>LastUpdatedAtPlantTs}" />
                                            </cells>
                                        </ColumnListItem>
                                    </Table>
                               </ScrollContainer>
                            </u:blocks>
                        </u:ObjectPageSubSection>
                    </u:subSections>
                </u:ObjectPageSection> 
            </u:sections>
        </u:ObjectPageLayout>

        <footer>
            <Bar>
                <contentRight>
                    <Button
                        text="{i18nGlobal>General.cancel}"
                        press="onCancel"/>
                </contentRight>
            </Bar>
        </footer> 
    </Page>
</mvc:View>