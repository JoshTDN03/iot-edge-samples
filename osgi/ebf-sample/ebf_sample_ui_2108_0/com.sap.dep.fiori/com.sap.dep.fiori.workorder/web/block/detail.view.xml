<mvc:View
    controllerName="dep.fiori.workorder.block.detail"
    displayBlock="true"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:c="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns="sap.m">
   <VBox>
    <f:Form>
        <f:layout>
            <f:ResponsiveGridLayout labelSpanL="2" />
        </f:layout>
        <f:toolbar>
            <Toolbar class="sapUiTinyMarginBottom">
                <Title text="{i18n>FormContainer.workorder}" />
                <ToolbarSpacer />
                <Button
                    text="{i18nGlobal>General.edit}"
                    press="onEdit"
                    visible="{= !${lock>/hasLock} &amp;&amp; ${/USER_STATUS}.substr(0, 4) !== 'TECO'}" />
                <Button
                    text="{i18nGlobal>General.save}"
                    press="onSave"
                    visible="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }" />
                <Button
                    text="{i18nGlobal>General.cancel}"
                    press="onCancel"
                    visible="{= !!${lock>/hasLock} }" />
            </Toolbar>
        </f:toolbar>
        <f:FormContainer>
            <f:layoutData>
                <l:GridData span="L12 M12 S12" />
            </f:layoutData>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Workorder.userStatus}"
                        tooltip="{i18n>Workorder.userStatus}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input
                    value="{/USER_STATUS}"
                    showValueHelp="true"
                    valueHelpOnly="true"
                    valueHelpRequest="getUserStatus"
                    enabled="{= !!${lock>/hasLock} }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Input>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Workorder.pmActType}"
                        tooltip="{i18n>Workorder.pmActType}">
                        <layoutData>
                            <l:GridData span="L2 M3 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Select
                    items="{activityTypes>/}"
                    selectedKey="{/ILART}"
                    showSecondaryValues="true"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <c:ListItem
                        text="{activityTypes>ILART}"
                        key="{activityTypes>ILART}"
                        additionalText="{activityTypes>ILATX}" />
                    <layoutData>
                        <l:GridData span="L1 M2 S4" />
                    </layoutData>
                </Select>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Workorder.basicStart}"
                        tooltip="{i18n>Workorder.basicStart}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <DatePicker
                    value="{/GSTRP}"
                    valueFormat="yyyyMMdd"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </DatePicker>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Workorder.basicFinish}"
                        tooltip="{i18n>Workorder.basicFinish}">
                        <layoutData>
                            <l:GridData span="L2 M3 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <DatePicker
                    value="{/GLTRP}"
                    valueFormat="yyyyMMdd"
                    minDate="{
                        path: '/GSTRP',
                        formatter: 'dep.fiori.lib.util.Utilities.date.fromYYYYMMDD'
                    }"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </DatePicker>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18nGlobal>General.description}"
                        tooltip="{i18nGlobal>General.description}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input
                    value="{/KTEXT}"
                    maxLength="40"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L6 M9 S12" />
                    </layoutData>
                </Input>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18nGlobal>General.longText}"
                        tooltip="{i18nGlobal>General.longText}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <TextArea
                    value="{/WO_LTXT}"
                    rows="4"
                    editable="false">
                    <layoutData>
                        <l:GridData span="L8 M10 S12" />
                    </layoutData>
                </TextArea>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.appendLTXT}"
                        tooltip="{i18n>Form.appendLTXT}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input
                    value="{/WO_LTXT_ADD}"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L8 M10 S12" />
                    </layoutData>
                </Input>
            </f:FormElement>
        </f:FormContainer>

        <f:FormContainer>
            <f:layoutData>
                <l:GridData span="L12 M12 S12" />
            </f:layoutData>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.workcenterLabel}"
                        tooltip="{i18n>Form.workcenterLabel}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input
                    showValueHelp="true"
                    valueHelpOnly="true"
                    value="{/VAPLZ}"
                    valueHelpRequest="onWorkcenterValueHelp"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Input>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.planGroup}"
                        tooltip="{i18n>Form.planGroup}">
                        <layoutData>
                            <l:GridData span="L2 M3 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Label
                    text="{/INGPR}"
                    tooltip="{/INGPR}">
                    <layoutData>
                        <l:GridData span="L2 M3 S12" />
                    </layoutData>
                </Label>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18nGlobal>General.equipment}"
                        tooltip="{i18nGlobal>General.equipment}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Label
                    text="{/EQUNR}"
                    tooltip="{/EQUNR}">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Label>
                <Label
                    text="{/EQKTX}"
                    tooltip="{/EQKTX}"
                    class="inlineFormLabelS">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Label>
                <Input
                    value="{
                        parts: [ '/ABCKZ', 'criticality>/' ],
                        formatter: '.classificationTextFormatter'
                    }"
                    valueState="{
                        parts: [ '/ABCKZ', 'criticality>/' ],
                        formatter: '.classificationStateFormatter'
                    }"
                    textAlign="Center"
                    enabled="false"
                    class="classification">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Input>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.locationLabel}"
                        tooltip="{i18n>Form.locationLabel}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Label
                    text="{/TPLNR}"
                    tooltip="{/TPLNR}">
                    <layoutData>
                        <l:GridData span="L4 M6 S12" />
                    </layoutData>
                </Label>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.costCenter}"
                        tooltip="{i18n>Form.costCenter}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Label
                    text="{/KOSTL}"
                    tooltip="{/KOSTL}">
                    <layoutData>
                        <l:GridData span="L2 M3 S12" />
                    </layoutData>
                </Label>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.respCostCenter}"
                        tooltip="{i18n>Form.respCostCenter}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Label
                    text="{/KOSTV}"
                    tooltip="{/KOSTV}">
                    <layoutData>
                        <l:GridData span="L2 M3 S12" />
                    </layoutData>
                </Label>
            </f:FormElement>
        </f:FormContainer>

        <f:FormContainer>
            <f:layoutData>
                <l:GridData span="L12 M12 S12" />
            </f:layoutData>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18nGlobal>General.priority}"
                        tooltip="{i18nGlobal>General.priority}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Select
                    items="{
                        path: 'odata>/Workorder_Priority',
                        filters: [
                            {
                                path: 'ARTPR',
                                operator: 'EQ',
                                value1: 'PM'
                            }
                        ]
                    }"
                    selectedKey="{/PRIOK}"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <c:Item
                        text="{odata>PRIOKX}"
                        key="{odata>PRIOK}" />
                    <layoutData>
                        <l:GridData span="L2 M3 S4" />
                    </layoutData>
                </Select>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.sysCondition}"
                        tooltip="{i18n>Form.sysCondition}">
                        <layoutData>
                            <l:GridData span="L2 M3 S12" />
                        </layoutData>
                    </Label>
                </f:label>
                <Select
                    items="{odata>/System_Condition}"
                    selectedKey="{/ANLZU}"
                    forceSelection="false"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <c:Item
                        text="{odata>VALUE}"
                        key="{odata>DO_KEY}" />
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Select>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.damageCode}"
                        tooltip="{i18n>Form.damageCode}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input id="damagecodeSelect"
                       showValueHelp="true"
                       valueHelpOnly="true"
                       value="{/FECOD}"
                       class="sapUiSmallMarginBottom"
                    valueHelpRequest="ondamagecodeValueHelp"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Input>
                <Label text="{/FETXT}"
                       class="inlineFormLabelS">
                    <layoutData>
                        <l:GridData span="L4 M6 S6" />
                    </layoutData>
                </Label>
            </f:FormElement>

            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18n>Form.causeCode}"
                        tooltip="{i18n>Form.causeCode}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Input id="causecodeSelect"
                    showValueHelp="true"
                    valueHelpOnly="true"
                    value="{/URCOD}"
                    class="sapUiSmallMarginBottom"
                    valueHelpRequest="oncausecodeValueHelp"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </Input>
                <Label text="{/URTXT}"
                       class="inlineFormLabelS">
                    <layoutData>
                        <l:GridData span="L4 M6 S6" />
                    </layoutData>
                </Label>
            </f:FormElement>
            <f:FormElement>
                <f:label>
                    <Label
                        text="{i18nGlobal>General.breakdown}"
                        tooltip="{i18nGlobal>General.breakdown}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <Checkbox
                    selected="{= ${/MSAUS} === 'X' }"
                    select="onBreakdownSelect"
                    enabled="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }" />
            </f:FormElement>

            <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                <f:label>
                    <Label
                        text="{i18n>Form.malfunctionStart}"
                        tooltip="{i18n>Form.malfunctionStart}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <DatePicker
                    value="{/AUSVN}"
                    valueFormat="yyyyMMdd"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </DatePicker>
                <TimePicker
                    value="{/AUZTV}"
                    valueFormat="hhmmss"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </TimePicker>
            </f:FormElement>

            <f:FormElement visible="{= ${/MSAUS} === 'X' }">
                <f:label>
                    <Label
                        text="{i18n>Form.malfunctionEnd}"
                        tooltip="{i18n>Form.malfunctionEnd}">
                        <layoutData>
                            <l:GridData span="L2 M2 S12" linebreak="true" />
                        </layoutData>
                    </Label>
                </f:label>
                <DatePicker
                    value="{/AUSBS}"
                    valueFormat="yyyyMMdd"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </DatePicker>
                <TimePicker
                    value="{/AUZTB}"
                    valueFormat="hhmmss"
                    editable="{
                        parts: [ 'lock>/hasLock', '/USER_STATUS' ],
                        formatter: '.isEditable'
                    }">
                    <layoutData>
                        <l:GridData span="L2 M3 S6" />
                    </layoutData>
                </TimePicker>
            </f:FormElement>
        </f:FormContainer>
    </f:Form>
      </VBox>
</mvc:View>